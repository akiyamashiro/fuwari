<div>class="giscus"</div>

<script is:inline>
//动态加载以适应主题切换
function loadGiscus(){
    const theme = document.documentElement.classList.constains('dark') ? 'dark' : 'light' ;

    const script = document.createElement('script');
    script.src = 'https://giscus.app/client.js';
    script.setAttribute('data-repo', 'akiyamashiro/fuwari');
    script.setAttribute('data-repo-id', 'R_kgDOPGBMhQ'); // 从giscus.app获取
    script.setAttribute('data-category', 'Announcements');
    script.setAttribute('data-category-id', 'DIC_kwDOPiLASc4CueT3');
    script.setAttribute('data-mapping', 'title');
    script.setAttribute('data-theme', theme);
    script.setAttribute('data-lang', 'zh-CN');
    script.setAttribute('crossorigin', 'anonymous');
    script.async = true;

    document.querySelector('.giscus').appendChild(script);
}

//检测主题变化
const observer = new MutationObserver(loadGiscus);
observer.observe(document.documentElement, { 
  attributes: true, 
  attributeFilter: ['class'] 
});

window.addEventListener('load', loadGiscus);
</script>